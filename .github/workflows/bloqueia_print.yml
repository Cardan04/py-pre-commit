name: üö´ Bloqueio de Print em Python

on:
  # O workflow ser√° executado quando houver um push ou um Pull Request.
  push:
    branches: [ "main", "master" ]
  pull_request:
    branches: [ "main", "master" ]

jobs:
  check_no_prints:
    runs-on: ubuntu-latest
    
    steps:
    - name: ‚¨áÔ∏è Checkout do C√≥digo
      # Baixa o c√≥digo do reposit√≥rio para o servidor de execu√ß√£o.
      uses: actions/checkout@v4
      
    - name: üîé Verifica√ß√£o de chamadas print()
      # Define o c√≥digo shell a ser executado.
      shell: bash
      run: |
        echo "Iniciando verifica√ß√£o de 'print()' em arquivos .py..."
        
        # O 'grep' procura o padr√£o 'print(' nos arquivos .py
        # O '-r' √© para busca recursiva em subpastas.
        # O '--include "*.py"' limita a busca a arquivos Python.
        # O '--color=always' ajuda a formatar a sa√≠da.
        if grep -r --include "*.py" 'print\s*(' . ; then
          echo "‚ùå FALHA: A palavra 'print()' foi encontrada no c√≥digo Python!"
          echo "Remova as chamadas 'print()' e use bibliotecas de log adequadas."
          exit 1  # Retorna c√≥digo de erro 1, FAZENDO O BUILD FALHAR
        else
          echo "‚úÖ Sucesso: Nenhum 'print()' encontrado em arquivos Python."
        fi
